extends layout

block styles
  link(rel="stylesheet", href="/css/managerDashboard.css")

block content
  //- KPI cards
  .topKPIs.kpi-container
    .kpi-card
      span üí∞ Revenue:
      strong UGX #{totalRevenue.toLocaleString()}
    .kpi-card
      span üì¶ Orders:
      strong #{totalOrders}
    .kpi-card
      span üìä AOV:
      strong UGX #{avgOrder}
    .kpi-card
      span üè∑Ô∏è Stock Items:
      strong #{totalStockItems}
    .kpi-card
      span üõí Products:
      strong #{totalProducts}

  //- Expenses
  .top-kpis
    .kpi-card.total
      h3 Purchase Costs
        ul
          li Timber: #{new Intl.NumberFormat().format(totalExpenseTimber.totalCost)} Shs
          li Hardwood: #{new Intl.NumberFormat().format(totalExpenseHardwood.totalCost)} Shs
          li Softwood: #{new Intl.NumberFormat().format(totalExpenseSoftwood.totalCost)} Shs
          li Poles: #{new Intl.NumberFormat().format(totalExpensePoles.totalCost)} Shs
          li Chairs: #{new Intl.NumberFormat().format(totalExpenseChairs.totalCost)} Shs
          li Tables: #{new Intl.NumberFormat().format(totalExpenseTables.totalCost)} Shs
      h2 Total Expense
        #{new Intl.NumberFormat().format((totalExpenseTimber.totalCost)+(totalExpenseHardwood.totalCost)+(totalExpenseSoftwood.totalCost)+(totalExpensePoles.totalCost)+totalExpenseChairs.totalCost+totalExpenseTables.totalCost)} Shs

  //- Sales
  .top-kpis
    .kpi-card.total
      h3 Total Sales
        ul
          li Timber: #{new Intl.NumberFormat().format(totalRevenueTimber.totalCost)} Shs

  //- Charts
  .charts
    .chart-card
      h2 Total Revenue Over Time
      canvas#revenueChart(height="200")
    .chart-card
      h2 Most Sold Items
      canvas#topItemsChart(height="200")

  .charts
    .chart-card
      h2 Sales by Attendant
      canvas#attendantChart(height="200")
    .chart-card
      h2 Payment Methods
      canvas#paymentChart(height="200")

  .charts
    .chart-card.full-width
      h2 Transport Usage
      canvas#transportChart(height="200")

  //- Available Products Table
  .available-products
    h2 Available Products
    table#availableProducts
      thead
        tr
          th Product
          th Quantity
      tbody

  //- Inventory Charts
  .charts
    .chart-card
      h2 Inventory Stock Levels
      canvas#inventoryChart(height="200")
    .chart-card
      h2 Low Stock Items
      canvas#lowStockChart(height="200")

  //- Latest Orders
  .latest-orders
    h2 Latest Orders
    table#latestOrders
      thead
        tr
          th Product
          th Date
          th Customer
          th Status
          th Amount
      tbody

block scripts
  script.
    window.revenueByDate = !{JSON.stringify(revenueByDate)};
    window.itemsMap = !{JSON.stringify(itemsMap)};
    window.agentMap = !{JSON.stringify(agentMap)};
    window.paymentMap = !{JSON.stringify(paymentMap)};
    window.transportStats = !{JSON.stringify(transportStats)};
    window.stockLevels = !{JSON.stringify(stockLevels)};
    window.lowStock = !{JSON.stringify(lowStock)};
    window.latestOrders = !{JSON.stringify(latestOrders)};
    window.salesData = !{JSON.stringify(salesData)};
  script(src="/js/dashboard.js")
